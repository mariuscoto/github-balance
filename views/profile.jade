extends layout

block content
  #menu

  #content
    .profile-left(ng-controller='user_controller')
      .profile-avatar
        img(ng-src="{{ avatar_src }}")

      .profile-name
        b {{ fullname }}
        br
        a(href='http://www.github.com/{{ user_name }}') {{ user_name }}

      .profile-info.profile-info-location(ng-show='location') {{ location }}
      .profile-info.profile-info-email(ng-show='email') {{ email }}
      .profile-info.profile-info-date(ng-show='join_date') Last seen on {{ join_date }}

      .profile-numbers
        .profile-num
          p {{ followers }}
          h5 followers
        .profile-num
          p {{ following }}
          h5 following

      .profile-links
        - if (everyauth.loggedIn)
          - if (user.user_name)
            a(href='/' + user.user_name + '/notifications') Notifications
            br
            a(href='#', onclick='shareOnFacebook()') Share on Facebook
            br
            a(href="https://twitter.com/share?text=I have {{ points }} cups", data-lang="en") Share on Twitter
            br
            a(href='/{{ user_name }}/remove') Remove profile
            br
            a(href='/logout') Logout

    .profile-right
      - if (currentUrl == '')
        .profile-points
          //.ideas-desc-top-square= cuser.tentacles
            //h5 tentacles
          //h1= cuser.points_repos + " cups "

        .spacer
      - if (currentUrl == '')
        .profile-list
          .profile-header All public repositories
          - if (!cuser)
            .profile-item No personal repos.
          - else
            - each repo in cuser.repos
              .profile-item
                - if (repo.fork)
                  .profile-repo-icon-forked
                - else
                  .profile-repo-icon
                .profile-repo-name
                  a(href=repo.html_url)= repo.name
                - if (repo.points != 0)
                  .profile-repo-points= "+" + repo.points
                .profile-repo-desc
                  = repo.description

      - if (currentUrl == 'notifications')
        .profile-notif
          .profile-header Your notifications
          - if (notif.length == 0)
            .profile-item
              = "You have no new notifications."
          - each n in notif
            .profile-item
              - if (n.type == 'idea_comm')
                = n.src + " commented on your "
                  a(href=n.link) idea
                  = ", " + n.date_f + "."
              - if (n.type == 'proj_comm')
                = n.src + " commented on your "
                  a(href=n.link) project
                  = ", " + n.date_f + "."
              - if (n.type == 'following_no')
                = "You have " + n.link + " users following."
              - if (n.type == 'followers_no')
                = "You have " + n.link + " followers."
              - if (n.type == 'watch_count')
                = "Repo " + n.src + " " + n.link + " watcher(s). "
              - if (n.type == 'fork_count')
                = "Repo " + n.src + " " + n.link + " user fork(s). "
              - if (n.type == 'pull_accepted')
                = "Repo " + n.src + " accepted your pull request."
              - if (n.type == 'welcome')
                = "Welcome to Github-connect! Check out our "
                  a(href=n.link) FAQ page
                  = " to get started."

  .spacer
  .spacer
